<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/auth.css">
</head>

<body>
   <%- include('../includes/navigation.ejs') %>

    <main>
        <% if (errorMessage) { %>
        <div class="user-message user-message--error"><%= errorMessage %></div>
        <% } %>
        <form class="login-form" action="/new-password" method="POST">
            <div class="form-control">
                <label for="password">Password</label>
                <input type="password" name="password" id="password">
            </div>
            <input type="hidden" name="userId" value="<%= userId %>">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <input type="hidden" name="passwordToken" value="<%= passwordToken %>">
            <button class="btn" type="submit">Update Password</button>
        </form>
    </main>
<%- include('../includes/end.ejs') %>
<!-- 유저가 있어야 해당 유저의 password로 접근이 가능하고 
그 ID를 쿼리로 사용해서 몽고의 데이터 접근가느앟고 
또한 passwordtoken = resetPassword 토큰 이기 때문에 그리고
토큰 제한 유통 기한 까지 설정해서 총 3개의 조건으로 찾아내고 이를 통해
해당 유저의 데이터를 찾고 그것을 기반으로 비밀번호를 req.body로 보낸걸 잡아서
그 값을 bcrpyt로 해쉬하고 해당 bson에 재할당 해주고 저장해준다.
물론 이 방법 말고 간단하게 다른 메소드를 사용해도 찾아내서 (findById~~~and Update나 등등)을
활용해서 더 쉽게 바꿔 줄 수 있을거 같다. -->